#[test_only]
module dwallet_system::lc_tests {

    const SENDER: address = @0x012;

    use dwallet::test_scenario;
    // use dwallet::dynamic_field as fields;
    use dwallet::test_utils::{Self};
    use dwallet_system::tendermint_lc::{init_lc, Self};
    
    #[test]
    fun tendermint_state_proof_test() {}
    #[test]
    fun tendermint_init_lc_test() {
        let scenario = test_scenario::begin(SENDER);
        let height = tendermint_lc::create_height(3, 0);

        let timestamp: vector<u8> = vector[1];
        let next_validators_hash : vector<u8> = vector[2];
        let root: vector<u8> = vector[3];
        let ctx = test_scenario::ctx(&mut scenario);
        let client = init_lc(height, timestamp, next_validators_hash, root, ctx);
        
        assert!(tendermint_lc::latest_height(&client) == height, 0);
        test_scenario::end(scenario);
        test_utils::destroy(client);
    }
    #[test]
    fun tendermint_verify_lc_test() {
         let scenario = test_scenario::begin(SENDER);
        let height = tendermint_lc::create_height(3, 0);

        let timestamp: vector<u8> = vector[50, 48, 50, 52, 45, 48, 55, 45, 49, 50, 84, 49, 49, 58, 48, 53, 58, 48, 57, 46, 51, 54, 54, 56, 52, 57, 49, 48, 52, 90];
        let next_validators_hash : vector<u8> = vector[21, 60, 28, 187, 0, 190, 203, 52, 31, 17, 78, 57, 164, 96, 36, 158, 242, 75, 82, 181, 40, 107, 205, 43, 108, 57, 226, 105, 169, 115, 88, 23];
        let root: vector<u8> = vector[250, 71, 122, 95, 80, 76, 172, 76, 196, 66, 160, 101, 147, 54, 30, 152, 195, 50, 162, 105, 97, 187, 215, 244, 26, 19, 62, 215, 255, 219, 119, 109];
        let ctx = test_scenario::ctx(&mut scenario);
        let client = init_lc(height, timestamp, next_validators_hash, root, ctx);
        
        assert!(tendermint_lc::latest_height(&client) == height, 0);
        // let header = vector[10, 199, 4, 10, 139, 3, 10, 2, 8, 11, 18, 5, 105, 98, 99, 45, 48, 24, 6, 34, 12, 8, 229, 155, 196, 180, 6, 16, 208, 216, 246, 174, 1, 42, 72, 10, 32, 230, 153, 83, 232, 204, 168, 206, 217, 69, 246, 213, 55, 105, 16, 170, 36, 144, 16, 99, 73, 157, 142, 1, 178, 30, 255, 92, 166, 2, 66, 41, 114, 18, 36, 8, 1, 18, 32, 5, 15, 229, 45, 140, 131, 107, 211, 183, 216, 43, 83, 178, 34, 1, 131, 136, 78, 12, 80, 25, 32, 20, 138, 146, 9, 88, 194, 181, 208, 5, 29, 50, 32, 173, 16, 107, 238, 65, 102, 13, 154, 220, 90, 212, 197, 90, 77, 75, 254, 99, 128, 108, 79, 207, 24, 3, 128, 79, 142, 251, 253, 20, 182, 241, 73, 58, 32, 227, 176, 196, 66, 152, 252, 28, 20, 154, 251, 244, 200, 153, 111, 185, 36, 39, 174, 65, 228, 100, 155, 147, 76, 164, 149, 153, 27, 120, 82, 184, 85, 66, 32, 21, 60, 28, 187, 0, 190, 203, 52, 31, 17, 78, 57, 164, 96, 36, 158, 242, 75, 82, 181, 40, 107, 205, 43, 108, 57, 226, 105, 169, 115, 88, 23, 74, 32, 21, 60, 28, 187, 0, 190, 203, 52, 31, 17, 78, 57, 164, 96, 36, 158, 242, 75, 82, 181, 40, 107, 205, 43, 108, 57, 226, 105, 169, 115, 88, 23, 82, 32, 4, 128, 145, 188, 125, 220, 40, 63, 119, 191, 191, 145, 215, 60, 68, 218, 88, 195, 223, 138, 156, 188, 134, 116, 5, 216, 183, 243, 218, 173, 162, 47, 90, 32, 250, 71, 122, 95, 80, 76, 172, 76, 196, 66, 160, 101, 147, 54, 30, 152, 195, 50, 162, 105, 97, 187, 215, 244, 26, 19, 62, 215, 255, 219, 119, 109, 98, 32, 227, 176, 196, 66, 152, 252, 28, 20, 154, 251, 244, 200, 153, 111, 185, 36, 39, 174, 65, 228, 100, 155, 147, 76, 164, 149, 153, 27, 120, 82, 184, 85, 106, 32, 227, 176, 196, 66, 152, 252, 28, 20, 154, 251, 244, 200, 153, 111, 185, 36, 39, 174, 65, 228, 100, 155, 147, 76, 164, 149, 153, 27, 120, 82, 184, 85, 114, 20, 253, 79, 239, 42, 177, 84, 60, 49, 154, 2, 214, 137, 47, 128, 252, 111, 118, 173, 102, 61, 18, 182, 1, 8, 6, 26, 72, 10, 32, 199, 60, 217, 57, 88, 222, 50, 25, 62, 162, 63, 133, 2, 131, 149, 83, 235, 198, 146, 252, 55, 10, 140, 54, 69, 47, 130, 159, 14, 238, 52, 241, 18, 36, 8, 1, 18, 32, 31, 111, 72, 41, 23, 187, 144, 153, 34, 5, 241, 208, 38, 160, 172, 234, 73, 244, 66, 17, 75, 53, 182, 122, 76, 235, 87, 12, 151, 62, 235, 168, 34, 104, 8, 2, 18, 20, 253, 79, 239, 42, 177, 84, 60, 49, 154, 2, 214, 137, 47, 128, 252, 111, 118, 173, 102, 61, 26, 12, 8, 234, 155, 196, 180, 6, 16, 237, 161, 154, 180, 1, 34, 64, 125, 52, 191, 187, 195, 49, 116, 68, 84, 25, 120, 167, 144, 178, 200, 204, 67, 93, 68, 231, 103, 205, 140, 100, 55, 196, 74, 15, 69, 106, 86, 29, 94, 245, 132, 65, 103, 166, 231, 11, 132, 131, 19, 228, 45, 26, 187, 9, 103, 89, 238, 150, 111, 173, 183, 215, 62, 6, 248, 48, 229, 93, 227, 10, 18, 126, 10, 60, 10, 20, 253, 79, 239, 42, 177, 84, 60, 49, 154, 2, 214, 137, 47, 128, 252, 111, 118, 173, 102, 61, 18, 34, 10, 32, 100, 86, 35, 36, 181, 186, 222, 9, 123, 142, 243, 70, 224, 128, 72, 121, 143, 202, 62, 242, 101, 37, 230, 199, 28, 130, 172, 74, 226, 98, 211, 65, 24, 1, 18, 60, 10, 20, 253, 79, 239, 42, 177, 84, 60, 49, 154, 2, 214, 137, 47, 128, 252, 111, 118, 173, 102, 61, 18, 34, 10, 32, 100, 86, 35, 36, 181, 186, 222, 9, 123, 142, 243, 70, 224, 128, 72, 121, 143, 202, 62, 242, 101, 37, 230, 199, 28, 130, 172, 74, 226, 98, 211, 65, 24, 1, 24, 1, 26, 2, 16, 6, 34, 64, 10, 60, 10, 20, 253, 79, 239, 42, 177, 84, 60, 49, 154, 2, 214, 137, 47, 128, 252, 111, 118, 173, 102, 61, 18, 34, 10, 32, 100, 86, 35, 36, 181, 186, 222, 9, 123, 142, 243, 70, 224, 128, 72, 121, 143, 202, 62, 242, 101, 37, 230, 199, 28, 130, 172, 74, 226, 98, 211, 65, 24, 1, 24, 1];
        let header = vector[10, 199, 4, 10, 139, 3, 10, 2, 8, 11, 18, 5, 105, 98, 99, 45, 48, 24, 10, 34, 12, 8, 249, 155, 196, 180, 6, 16, 214, 141, 149, 201, 1, 42, 72, 10, 32, 63, 110, 249, 22, 37, 107, 4, 75, 18, 162, 42, 21, 137, 99, 96, 240, 140, 200, 164, 161, 197, 55, 82, 220, 12, 174, 214, 112, 190, 53, 187, 231, 18, 36, 8, 1, 18, 32, 63, 17, 171, 213, 32, 225, 117, 142, 144, 231, 129, 73, 131, 68, 42, 59, 142, 254, 9, 251, 254, 195, 178, 215, 71, 68, 130, 48, 81, 182, 173, 27, 50, 32, 79, 252, 108, 15, 8, 169, 4, 11, 254, 17, 5, 82, 82, 3, 95, 94, 64, 100, 45, 199, 96, 184, 218, 1, 223, 108, 12, 217, 162, 68, 213, 49, 58, 32, 227, 176, 196, 66, 152, 252, 28, 20, 154, 251, 244, 200, 153, 111, 185, 36, 39, 174, 65, 228, 100, 155, 147, 76, 164, 149, 153, 27, 120, 82, 184, 85, 66, 32, 21, 60, 28, 187, 0, 190, 203, 52, 31, 17, 78, 57, 164, 96, 36, 158, 242, 75, 82, 181, 40, 107, 205, 43, 108, 57, 226, 105, 169, 115, 88, 23, 74, 32, 21, 60, 28, 187, 0, 190, 203, 52, 31, 17, 78, 57, 164, 96, 36, 158, 242, 75, 82, 181, 40, 107, 205, 43, 108, 57, 226, 105, 169, 115, 88, 23, 82, 32, 4, 128, 145, 188, 125, 220, 40, 63, 119, 191, 191, 145, 215, 60, 68, 218, 88, 195, 223, 138, 156, 188, 134, 116, 5, 216, 183, 243, 218, 173, 162, 47, 90, 32, 250, 205, 108, 46, 129, 229, 203, 91, 142, 79, 196, 93, 168, 227, 138, 45, 70, 86, 220, 18, 86, 11, 244, 226, 125, 168, 129, 42, 96, 98, 29, 246, 98, 32, 227, 176, 196, 66, 152, 252, 28, 20, 154, 251, 244, 200, 153, 111, 185, 36, 39, 174, 65, 228, 100, 155, 147, 76, 164, 149, 153, 27, 120, 82, 184, 85, 106, 32, 227, 176, 196, 66, 152, 252, 28, 20, 154, 251, 244, 200, 153, 111, 185, 36, 39, 174, 65, 228, 100, 155, 147, 76, 164, 149, 153, 27, 120, 82, 184, 85, 114, 20, 253, 79, 239, 42, 177, 84, 60, 49, 154, 2, 214, 137, 47, 128, 252, 111, 118, 173, 102, 61, 18, 182, 1, 8, 10, 26, 72, 10, 32, 182, 194, 136, 163, 170, 30, 176, 72, 77, 144, 162, 93, 116, 0, 128, 219, 23, 65, 152, 46, 8, 233, 167, 190, 246, 111, 27, 253, 156, 21, 122, 191, 18, 36, 8, 1, 18, 32, 131, 179, 33, 203, 78, 37, 147, 21, 113, 137, 157, 31, 230, 54, 116, 49, 161, 8, 119, 182, 20, 245, 145, 205, 203, 204, 2, 17, 204, 161, 227, 25, 34, 104, 8, 2, 18, 20, 253, 79, 239, 42, 177, 84, 60, 49, 154, 2, 214, 137, 47, 128, 252, 111, 118, 173, 102, 61, 26, 12, 8, 254, 155, 196, 180, 6, 16, 188, 190, 166, 206, 1, 34, 64, 254, 26, 184, 18, 153, 193, 115, 190, 24, 74, 69, 20, 214, 195, 117, 2, 7, 146, 60, 145, 211, 81, 87, 230, 171, 194, 245, 36, 55, 104, 3, 43, 12, 158, 169, 216, 144, 75, 143, 171, 98, 168, 177, 93, 1, 121, 168, 26, 5, 190, 88, 238, 31, 39, 252, 145, 30, 218, 179, 46, 40, 167, 198, 12, 18, 126, 10, 60, 10, 20, 253, 79, 239, 42, 177, 84, 60, 49, 154, 2, 214, 137, 47, 128, 252, 111, 118, 173, 102, 61, 18, 34, 10, 32, 100, 86, 35, 36, 181, 186, 222, 9, 123, 142, 243, 70, 224, 128, 72, 121, 143, 202, 62, 242, 101, 37, 230, 199, 28, 130, 172, 74, 226, 98, 211, 65, 24, 1, 18, 60, 10, 20, 253, 79, 239, 42, 177, 84, 60, 49, 154, 2, 214, 137, 47, 128, 252, 111, 118, 173, 102, 61, 18, 34, 10, 32, 100, 86, 35, 36, 181, 186, 222, 9, 123, 142, 243, 70, 224, 128, 72, 121, 143, 202, 62, 242, 101, 37, 230, 199, 28, 130, 172, 74, 226, 98, 211, 65, 24, 1, 24, 1, 26, 2, 16, 6, 34, 64, 10, 60, 10, 20, 253, 79, 239, 42, 177, 84, 60, 49, 154, 2, 214, 137, 47, 128, 252, 111, 118, 173, 102, 61, 18, 34, 10, 32, 100, 86, 35, 36, 181, 186, 222, 9, 123, 142, 243, 70, 224, 128, 72, 121, 143, 202, 62, 242, 101, 37, 230, 199, 28, 130, 172, 74, 226, 98, 211, 65, 24, 1, 24, 1];
        let ans = tendermint_lc::verify_lc(&client, header);

        assert!(ans == true, 0);
        test_scenario::end(scenario);
        test_utils::destroy(client);
    }

    #[test]
    fun tendermint_update_lc_test() {}
}